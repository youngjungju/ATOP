# TECHSPEC.md
# Skin Observation Report (Web MVP)

## 1. 목적 (Purpose)

이 프로젝트의 목적은 사용자가 촬영한 피부 사진과
현재 복용/사용 중인 약 정보를 기반으로,
AI가 시각적 특징을 **의학적 진단 없이 관찰·요약**하여
의사와 더 편하게 소통할 수 있는 **리포트 형태의 웹 서비스**를 구현하는 것이다.

본 서비스는 진단, 치료, 처방을 제공하지 않는다.
모든 AI 출력은 참고용 시각적 관찰 및 사용자 기록 요약에 한정된다.

---

## 2. 핵심 사용자 가치

- 사용자는 피부 상태를 감(느낌)이 아닌 기록과 언어로 설명할 수 있다
- 병원 방문 시 반복적으로 설명해야 하는 정보를 한 화면에 정리할 수 있다
- 의사는 짧은 시간 안에 상태 변화와 복용 이력을 파악할 수 있다

---

## 3. 기술 스택

### Frontend
- Next.js 14 (App Router)
- React
- Tailwind CSS
- Client Components 최소화

### Backend
- Next.js Route Handlers
- OpenAI Responses API (Vision)
- Supabase Storage
- Supabase Postgres (optional, MVP에서는 생략 가능)

### Infra / Tools
- Cursor (주 개발 환경)
- Vercel (배포 가정)

---

## 4. 시스템 아키텍처
[Browser]
 ├─ Landing Page
 │
 └─ Upload Page
     ├─ Image Upload
     ├─ Medication Input
     └─ Submit
          │
          ├─ Supabase Storage
          │    └─ 이미지 파일 저장
          │
          ├─ Vision Summary API (OpenAI)
          │    └─ 시각적 특징 관찰 요약 생성
          │
          └─ Report Page
               ├─ 원본 이미지
               ├─ AI 시각적 관찰 요약
               ├─ 복용/사용 중인 약 정보
               └─ 의료 진단 아님 고지

---

## 5. 기능 범위 (Scope)

### 포함 (In Scope)

- 이미지 업로드
- 이미지 스토리지 저장
- OpenAI Vision 기반 시각적 특징 관찰 요약
- 복용/사용 중인 약 기록 (자유 입력)
- 리포트 페이지 생성
- 의료 진단 아님 고지 UI

### 제외 (Out of Scope)

- 의료 진단 / 질병 판별
- 약 추천 또는 복용 변경 제안
- 사용자 인증
- 결제
- 실제 병원 시스템 연동
- PDF 생성 (웹 리포트로 대체)

---

## 6. 복용 중인 약 기록 기능

### 기능 설명

사용자는 현재 복용 또는 사용 중인 약을 자유 텍스트로 기록할 수 있다.
각 약은 다음 정보를 포함할 수 있다:

- 약 이름 (텍스트)
- 사용/복용 시간대 (아침, 저녁)
- 타입 (선택): 바르는 약 / 먹는 약

이 정보는 사용자가 입력한 사실 기록이며,
의사와의 커뮤니케이션을 돕는 용도로만 사용된다.

---

## 7. AI 사용 원칙 (중요)

AI는 다음 역할만 수행한다:

- 사진에서 보이는 시각적 특징을 객관적으로 설명
- 붉은기, 건조해 보이는 영역, 피부 표면 특성 서술
- 사진 간 비교 시 변화 방향만 언급
- 사용자가 입력한 약 정보를 **사실 요약 수준으로만 언급**

AI가 **절대 수행하지 않는 것**:

- 질병명 단정 (아토피, 습진 등)
- 상태 판단 (경증/중증)
- 치료 또는 약 추천
- 약의 효과, 적절성, 변경 여부 판단

모든 프롬프트에는 위 제한사항이 명시된다.

---

## 8. Vision 요약 출력 규칙

AI 출력은 다음 요소를 포함한다:

- 붉은기 정도 (정성적 표현)
- 건조/각질로 보이는 영역
- 피부 표면 질감에 대한 관찰
- 사용자 기록 기반 복용 정보 요약 (사실 전달)
- 사진 품질/조명으로 인한 불확실성 고지

출력은 자연어 텍스트 또는 JSON 형태 모두 가능하다.

---

## 9. 리포트 페이지 요구사항

리포트 페이지는 다음 섹션으로 구성된다:

1. 업로드한 원본 이미지
2. AI 시각적 관찰 요약
3. 복용/사용 중인 약 목록 (사용자 입력)
4. 고정 고지 문구

고지 문구 예시:
> 본 결과는 의료 진단이 아니며,  
> 사진과 사용자 기록에 기반한 시각적 관찰 요약입니다.

---

## 10. 보안 및 책임 회피

- 이미지 외 개인정보 수집 없음
- 의료 관련 책임 회피 문구를 모든 주요 화면에 명시
- AI 출력은 수정 불가 상태로 표시 (권위 오해 방지)

---

## 11. 성공 기준

- 실제 이미지 업로드 → 요약 → 리포트 생성까지 동작
- 약 정보 입력 → 리포트 반영 확인
- 제3자(의사/심사위원)가 봤을 때 목적이 명확함
- 의료 진단 서비스로 오해되지 않음

